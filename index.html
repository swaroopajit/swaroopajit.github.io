<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-site-verification" content="XSsxpJpCOvhqayCnG6nWyLEKYd71v4-E2LjxQKQJkWM" />
    <meta
      name="description"
      content="Portfolio of Swaroop Ajit, a Bengaluru-based senior software developer specializing in applied AI, multimodal LLMs, computer vision, and privacy-first ML delivery."
    />
    <meta
      name="keywords"
      content="Swaroop Ajit, Swaroop Ajit Palayat, Swaroop, applied AI engineer, multimodal AI, computer vision, privacy engineering, machine learning portfolio, research and development, R&D, UST Innovation Labs, Swaroop BITS Pilani, Swaroop Innovation Labs"
    />
    <meta name="author" content="Swaroop Ajit" />
    <meta name="robots" content="index, follow" />
    <title>Swaroop Ajit Palayat| Personal Website</title>
    <link rel="canonical" href="https://www.swaroopajit.com/" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Swaroop Ajit Palayat| Applied AI Engineer & Photographer" />
    <meta
      property="og:description"
      content="Senior software developer and applied AI engineer bringing multimodal machine learning from research to production with human-centered design."
    />
    <!-- <meta property="og:url" content="https://www.swaroopajit.com/" /> -->
    <meta property="og:site_name" content="Swaroop Ajit Palayat" />
    <meta
      property="og:image"
      content="https://www.swaroopajit.com/assets/images/portrait.jpeg"
    />
    <meta property="og:image:alt" content="Portrait of Swaroop Ajit Palayat" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Swaroop Ajit Palayat| Applied AI Engineer & Photographer" />
    <meta
      name="twitter:description"
      content="Senior software developer and applied AI engineer bringing multimodal machine learning from research to production with human-centered design."
    />
    <meta
      name="twitter:image"
      content="https://www.swaroopajit.com/assets/images/portrait.jpeg"
    />
    <meta name="twitter:image:alt" content="Portrait of Swaroop Ajit Palayat" />
    <meta name="theme-color" content="#0b141f" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Swaroop Ajit",
        "alternateName": "Swaroop Ajit Palayat",
        "jobTitle": "Senior Software Developer & Applied AI Engineer",
        "image": "https://www.swaroopajit.com/assets/images/portrait.jpeg",
        "url": "https://www.swaroopajit.com/",
        "worksFor": {
          "@type": "Organization",
          "name": "UST Innovation Labs"
        },
        "alumniOf": {
          "@type": "CollegeOrUniversity",
          "name": "Birla Institute of Technology and Science, Pilani"
        },
        "sameAs": [
          "https://www.linkedin.com/in/swaroop-ajit-palayat/",
          "https://github.com/swaroopajit",
          "https://www.instagram.com/this.is.swaroop/"
        ],
        "knowsAbout": [
          "Multimodal AI",
          "Machine Learning Operations",
          "Computer Vision",
          "Privacy Engineering"
        ],
        "homeLocation": {
          "@type": "Place",
          "name": "Bengaluru, India"
        }
      }
    </script>
  </head>
  <body>
    <!-- <header class="site-header">
      <div class="container">
        <div class="brand">
          <span class="logo">SP</span>
          <div class="brand-text">
            <strong>Swaroop Ajit Palayat</strong>
            <span>Applied AI Engineer & Photographer</span>
          </div>
        </div>
        <nav class="site-nav">
          <a href="#skills">Skills</a>
          <a href="#experience">Experience</a>
          <a href="#education">Education</a>
          <a href="#photography">Photography</a>
          <a href="#contact">Contact</a>
        </nav>
        <button class="nav-toggle" aria-label="Toggle navigation">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </header> -->

    <main>
      <section class="hero" data-scroll>
        <div class="container hero-content">
          <div class="hero-copy">
            <p class="eyebrow">Senior Software Developer • UST Innovation Labs</p>
            <h1>
              Building AI systems that carry machine learning from lab experiments into production impact.
            </h1>
            <p class="lead">
              Bengaluru-based engineer and BITS Pilani alum focused on
              multimodal LLMs, computer vision, and privacy-preserving
              architectures. I collaborate across research and product teams to
              deliver human-centered ML experiences.
            </p>
            <div class="hero-actions">
              <a class="btn primary" href="#skills">View Skills</a>
              <!-- <a class="btn ghost" href="#contact">Get in touch</a> -->
            </div>
          </div>
          <div class="hero-media">
            <figure class="hero-photo">
              <img
                src="assets/images/portrait.jpeg"
                alt="Portrait of Swaroop Ajit"
              />
            </figure>
            <!-- <div class="hero-card">
              <div class="hero-card-content">
                <p class="hero-card-title">Latest Focus</p>
                <h2>Scaling generative AI fluency at UST</h2>
                <p>
                  Leading internal workshops for 150+ teammates while advancing
                  production-ready prototypes in multimodal AI and privacy tech.
                </p>
                <a href="#skills" class="link-arrow"
                  >See the write-up<span aria-hidden="true">→</span></a
                > 
              </div>
            </div> -->
          </div>
        </div>
        <div class="hero-atmosphere" aria-hidden="true"></div>
      </section>

      <section id="skills" class="section" data-scroll>
        <div class="container section-header">
          <p class="eyebrow">Capabilities</p>
          <h2>Skills & Tooling</h2>
          <p>
            The technical depth and collaborative strengths I bring to applied
            AI, from research sprints to production launches.
          </p>
        </div>
        <div class="container skills-grid">
          <article class="skill-card" tabindex="0">
            <div class="skill-tag">AI & ML</div>
            <h3>Modeling & Evaluation</h3>
            <p class="skill-summary">
              Designing multimodal, vision, and language systems with rigorous
              experimentation and measurable business impact.
            </p>
            <div class="skill-detail">
              <p class="skill-detail-label">Toolkit</p>
              <ul>
                <li>MLOps</li>
                <li>PyTorch</li>
                <li>TensorFlow.js</li>
                <li>LangChain</li>
                <li>Prompt Engineering</li>
                <li>OpenCV</li>
              </ul>
            </div>
          </article>

          <article class="skill-card" tabindex="0">
            <div class="skill-tag">Engineering</div>
            <h3>Full-Stack Delivery</h3>
            <p class="skill-summary">
              Bridging prototypes to shipped experiences with resilient frontend
              and backend systems.
            </p>
            <div class="skill-detail">
              <p class="skill-detail-label">Stacks I ship with</p>
              <ul>
                <li>TypeScript & React</li>
                <li>Three.js</li>
                <li>Node.js</li>
                <li>Python</li>
                <li>AWS</li>
                <li>CI/CD automation</li>
              </ul>
            </div>
          </article>

          <article class="skill-card" tabindex="0">
            <div class="skill-tag">Product</div>
            <h3>Collaboration & Leadership</h3>
            <p class="skill-summary">
              Guiding cross-functional teams through discovery, alignment, and
              education to accelerate adoption.
            </p>
            <div class="skill-detail">
              <p class="skill-detail-label">How I lead</p>
              <ul>
                <li>Workshop facilitation</li>
                <li>Tech evangelism & speaking</li>
                <li>Stakeholder storytelling</li>
              </ul>
            </div>
          </article>
        </div>
      </section>

      <section id="experience" class="section muted" data-scroll>
        <div class="container section-header">
          <p class="eyebrow">Career Journey</p>
          <h2>Work Experience</h2>
          <p>
            Blending product engineering and design collaboration across teams.
          </p>
        </div>
        <div class="container experience-timeline">
          <article class="experience-card">
            <div class="experience-meta">
              <span class="experience-date">Aug 2023 — Present</span>
              <span class="experience-role">Senior Software Developer</span>
              <span class="experience-company">UST - Innovation Labs (R&D)</span>
            </div>
            <p>
              Driving applied AI research into deployable solutions across
              retail, mobility, and fintech initiatives.
            </p>
            <ul>
              <li>Collaborated in a team of three to fine-tune a multimodal large language model for a fashion application, successfully presenting it at UST’s technical conference, D3. The model demonstrated the ability to accurately identify clothing items and discern intricate details such as puff sleeves, bell-bottom pants, v-necks, etc.</li>
              <li>Responsible for creating, maintaining, and deploying a scalable machine learning backend service for a healthcare partner.</li>
              <li>Delivered a Proof of Concept within just two weeks, demonstrating how synthetic data generation can be leveraged to create verification data for ADAS systems, enhancing testing and validation capabilities.</li>
              <li>Independently developed a Minimum Viable Concept showcasing the potential of zero-knowledge proofs in a commercial Know-Your-Customer use case—protecting user privacy, easing the regulatory burden on small businesses, and enabling scalable compliance solutions.</li>
              <li>Conducted comprehensive introductory training sessions on Machine Learning and Generative AI for over 150 employees, fostering interest and accelerating company-wide adoption of generative AI tools and methodologies.</li>
              <li>Regularly delivered engaging presentations on UST’s R&D department, Innovation Labs, to prospective clients, effectively communicating complex projects and showcasing the company’s capabilities—contributing to increased client interest and securing multiple collaborations.</li>
            </ul>
          </article>

          <article class="experience-card">
            <div class="experience-meta">
              <span class="experience-date">Jul 2022 — Dec 2022</span>
              <span class="experience-role">Machine Learning Intern</span>
              <span class="experience-company">UST - Innovation Labs (R&D)</span>
            </div>
            <p>
              Developed immersive commerce capabilities blending 3D product
              visualization with real-time inference.
            </p>
            <ul>
              <li>
                Developed a spectacle try-on feature, utilizing 3D models with Three.js for visualization and TensorFlow.js on ReactJS for facial landmark detection and rotation tracking. Fully integrated into a major retailer’s website, the feature provided a seamless and scalable virtual try-on experience.
              </li>
            </ul>
          </article>

          <article class="experience-card">
            <div class="experience-meta">
              <span class="experience-date">Jan 2022 — Jun 2022</span>
              <span class="experience-role">Full Stack Developer Intern</span>
              <span class="experience-company">Indsoft Software Technologies</span>
            </div>
            <p>
              Delivered client-facing web modules spanning dashboards and data
              integrations for SMEs in Bengaluru.
            </p>
            <ul>
              <li>
                Built reusable UI components and automated deployment scripts to
                streamline releases.
              </li>
            </ul>
          </article>
        </div>
      </section>

      <section id="education" class="section" data-scroll>
        <div class="container section-header">
          <p class="eyebrow">Academic Foundation</p>
          <h2>Education</h2>
        </div>
        <div class="container experience-timeline">
          <article class="experience-card">
            <div class="experience-meta">
              <span class="experience-date">2018 — 2023</span>
              <span class="experience-role">Integrated Master's, Physics</span>
              <span class="experience-company">BITS Pilani, Hyderabad Campus</span>
            </div>
          </article>
          <article class="experience-card">
            <div class="experience-meta">
              <span class="experience-date">2018 — 2023</span>
              <span class="experience-role">Bachelor of Engineering</span>
              <span class="experience-company">BITS Pilani, Hyderabad Campus</span>
            </div>
          </article>
        </div>
      </section>

      <section id="photography" class="section" data-scroll>
        <div class="container section-header">
          <p class="eyebrow">Photography</p>
          <h2>Photo Gallery</h2>
          <p>
            A collection of my favorite shots capturing moments and perspectives
            through the lens.
          </p>
          <!-- <a
            class="btn ghost"
            href="https://www.instagram.com/this.is.swaroop/"
            target="_blank"
            rel="noopener noreferrer"
            >@this.is.swaroop</a
          > -->
        </div>
        <div class="container photo-grid">
          <figure
            class="photo-card"
            data-photo-index="0"
            data-location="Tokyo"
            data-date="2025"
            role="button"
            tabindex="0"
            aria-label="Open photo Tokyo"
          >
            <img src="assets/images/F4F7E860-B259-469D-8D0A-86E32D10F6CF.JPG" alt="Photography by Swaroop Ajit" />
            <figcaption>
              <span class="photo-caption-location">Tokyo</span>
              <span class="photo-caption-date">2025</span>
            </figcaption>
          </figure>
          <figure
            class="photo-card"
            data-photo-index="1"
            data-location="Fuji Motorsports Museum"
            data-date="2025"
            role="button"
            tabindex="0"
            aria-label="Open photo Fuji Motorsports Museum"
          >
            <img src="assets/images/F575FE65-EEC3-44B1-A83B-502CCCE57D88.JPG" alt="Photography by Swaroop Ajit" />
            <figcaption>
              <span class="photo-caption-location">Fuji Motorsports Museum</span>
              <span class="photo-caption-date">2025</span>
            </figcaption>
          </figure>
          <figure
            class="photo-card"
            data-photo-index="2"
            data-location="Hong Kong"
            data-date="2024"
            role="button"
            tabindex="0"
            aria-label="Open photo Hong Kong"
          >
            <img src="assets/images/IMG_0193.JPG" alt="Photography by Swaroop Ajit" />
            <figcaption>
              <span class="photo-caption-location">Hong Kong</span>
              <span class="photo-caption-date">2024</span>
            </figcaption>
          </figure>
          <figure
            class="photo-card"
            data-photo-index="3"
            data-location="Singapore"
            data-date="2025"
            role="button"
            tabindex="0"
            aria-label="Open photo Singapore"
          >
            <img src="assets/images/IMG_0792.JPG" alt="Photography by Swaroop Ajit" />
            <figcaption>
              <span class="photo-caption-location">Singapore</span>
              <span class="photo-caption-date">2025</span>
            </figcaption>
          </figure>
          <figure
            class="photo-card"
            data-photo-index="4"
            data-location="Yatsuo City"
            data-date="2025"
            role="button"
            tabindex="0"
            aria-label="Open photo Yatsuo City"
          >
            <img src="assets/images/IMG_8853.JPG" alt="Photography by Swaroop Ajit" />
            <figcaption>
              <span class="photo-caption-location">Yatsuo City</span>
              <span class="photo-caption-date">2025</span>
            </figcaption>
          </figure>
          <figure
            class="photo-card"
            data-photo-index="5"
            data-location="Yatsuo City"
            data-date="2025"
            role="button"
            tabindex="0"
            aria-label="Open photo Yatsuo City"
          >
            <img src="assets/images/IMG_9058.JPG" alt="Photography by Swaroop Ajit" />
            <figcaption>
              <span class="photo-caption-location">Yatsuo City</span>
              <span class="photo-caption-date">2025</span>
            </figcaption>
          </figure>
          <figure
            class="photo-card"
            data-photo-index="5"
            data-location="Jungfraujoch"
            data-date="2019"
            role="button"
            tabindex="0"
            aria-label="Open photo Jungfraujoch"
          >
            <img src="assets/images/F6020C7D-3A6A-4049-AFAF-ED8C5330F0DF.JPG" alt="Photography by Swaroop Ajit" />
            <figcaption>
              <span class="photo-caption-location">Jungfraujoch</span>
              <span class="photo-caption-date">2019</span>
            </figcaption>
          </figure>
        </div>
        <div
          class="photo-lightbox"
          data-lightbox
          hidden
          aria-hidden="true"
          role="dialog"
          aria-modal="true"
          aria-label="Photo viewer"
          tabindex="-1"
        >
          <button class="lightbox-control lightbox-close" type="button" aria-label="Close photo viewer">
            <span aria-hidden="true">&times;</span>
          </button>
          <button class="lightbox-control lightbox-prev" type="button" aria-label="View previous photo">
            <span aria-hidden="true">←</span>
          </button>
          <div class="lightbox-stage">
            <img data-lightbox-image src="" alt="" />
          </div>
          <div class="lightbox-caption">
            <span data-lightbox-location></span>
            <span data-lightbox-date></span>
          </div>
          <button class="lightbox-control lightbox-next" type="button" aria-label="View next photo">
            <span aria-hidden="true">→</span>
          </button>
        </div>
      </section>

      <!-- <section id="privacy" class="section legal" data-scroll>
        <div class="container section-header">
          <p class="eyebrow">Transparency</p>
          <h2>Privacy Policy</h2>
          <p>
            A concise look at how this portfolio handles analytics, contact
            messages, and third-party embeds.
          </p>
        </div>
        <div class="container legal-grid">
          <article class="legal-card" data-scroll>
            <h3>Data Collection</h3>
            <p>
              This site is a static showcase. It does not run ads, trackers, or
              cookie banners. The only personal data captured is what you
              voluntarily provide if you email or message me.
            </p>
          </article>
          <article class="legal-card" data-scroll>
            <h3>Contact & Storage</h3>
            <p>
              Messages submitted through email or social links are stored in my
              inboxes so I can reply. I do not sell or share that information
              with third parties. You can request removal at any time.
            </p>
          </article>
          <article class="legal-card" data-scroll>
            <h3>Third-Party Embeds</h3>
            <p>
              The Instagram embed displayed in the photography section is
              provided by Meta Platforms and may set its own cookies or collect
              usage data in line with Instagram’s policies.
            </p>
          </article>
          <article class="legal-card" data-scroll>
            <h3>Updates</h3>
            <p>
              I periodically refresh this policy as I add new projects or
              integrations. The “last updated” date will reflect the most recent
              change.
            </p>
          </article>
        </div>
        <p class="legal-updated">Last updated: <span>November 2024</span></p>
      </section>

      <section id="terms" class="section legal" data-scroll>
        <div class="container section-header">
          <p class="eyebrow">Ground Rules</p>
          <h2>Terms & Conditions</h2>
          <p>
            Guidance on how you may reference, share, or collaborate on the
            materials published here.
          </p>
        </div>
        <div class="container legal-grid">
          <article class="legal-card" data-scroll>
            <h3>Use Of Content</h3>
            <p>
              You are welcome to link to this site and reference publicly shared
              work. Please do not reuse the photography or code without written
              permission.
            </p>
          </article>
          <article class="legal-card" data-scroll>
            <h3>Project Accuracy</h3>
            <p>
              Case studies and descriptions reflect my understanding at the time
              of writing. They may evolve as projects move forward or NDAs
              change. Reach out if you need clarification.
            </p>
          </article>
          <article class="legal-card" data-scroll>
            <h3>External Links</h3>
            <p>
              Links to third-party resources are provided for context. I do not
              control their content and I am not responsible for any changes or
              downtime.
            </p>
          </article>
          <article class="legal-card" data-scroll>
            <h3>Collaboration Requests</h3>
            <p>
              Any proposals discussed through this site are exploratory until a
              written agreement is executed. Please avoid sharing confidential
              information on first contact.
            </p>
          </article>
        </div>
      </section> -->
    </main>

    <footer id="contact" class="site-footer">
      <div class="container footer-grid">
        <!-- <div class="footer-cta" data-scroll>
          <div class="footer-cta-card">
            <h2>Let's collaborate</h2>
            <p>
              Open to collaborations around applied AI, computer vision, and
              privacy-first product development. Let’s explore how I can help your
              team experiment and ship faster.
            </p>
            <a class="btn primary" href="mailto:swaroopajitpalayat@gmail.com"
              >Email Me</a
            >
          </div>
        </div> -->
        <div class="footer-links" data-scroll>
          <p class="eyebrow">Elsewhere</p>
          <ul>
            <li><a href="https://www.linkedin.com/in/swaroop-ajit-palayat/" target="_blank" rel="noopener noreferrer">LinkedIn</a></li>
            <li><a href="https://github.com/swaroopajit" target="_blank" rel="noopener noreferrer">GitHub</a></li>
            <li><a href="https://www.instagram.com/this.is.swaroop" target="_blank" rel="noopener noreferrer">Instagram</a></li>
          </ul>
        </div>
      </div>
      <p class="footer-note">
        © <span id="current-year"></span> Swaroop Ajit. Built with curiosity and
        good coffee.
      </p>
      <!-- <div class="footer-legal" data-scroll>
        <a href="#privacy" class="footer-legal-link" data-modal="privacy">Privacy Policy</a>
        <span aria-hidden="true">•</span>
        <a href="#terms" class="footer-legal-link" data-modal="terms">Terms &amp; Conditions</a>
      </div> -->
    </footer>

    <script>
      // Basic image protection
      document.addEventListener('contextmenu', e => e.preventDefault());
      document.addEventListener('keydown', e => {
        if (e.key === 'F12' || 
            (e.ctrlKey && e.shiftKey && e.key === 'I') ||
            (e.ctrlKey && e.key === 'u') ||
            (e.ctrlKey && e.key === 's')) {
          e.preventDefault();
        }
      });

      const navToggle = document.querySelector(".nav-toggle");
      const siteNav = document.querySelector(".site-nav");

      navToggle?.addEventListener("click", () => {
        siteNav.classList.toggle("open");
        navToggle.classList.toggle("open");
      });

      const year = document.getElementById("current-year");
      if (year) {
        year.textContent = new Date().getFullYear().toString();
      }

      const prefersReducedMotion = window.matchMedia
        ? window.matchMedia("(prefers-reduced-motion: reduce)")
        : { matches: false };

      const revealSelectors = [
        ".hero-content",
        ".hero-card",
        ".hero-photo",
        ".section-header",
        ".skill-card",
        ".experience-card",
        ".experience-company",
        ".legal-card",
        ".photo-grid .instagram-embed",
        ".footer-cta",
        ".footer-links",
        ".footer-note",
        ".footer-legal"
      ];

      const revealElements = Array.from(
        new Set(
          revealSelectors.reduce((accumulated, selector) => {
            const found = document.querySelectorAll(selector);
            if (found.length) {
              accumulated.push(...found);
            }
            return accumulated;
          }, [])
        )
      );

      revealElements.forEach((element) => {
        element.classList.add("scroll-reveal");
      });

      [
        { selector: ".hero-card", delay: 0.2 },
        { selector: ".hero-photo", delay: 0.1 },
        { selector: ".skills-grid > .skill-card", delayStep: 0.08 },
        { selector: ".experience-timeline > .experience-card", delayStep: 0.1 },
        { selector: ".legal-grid > .legal-card", delayStep: 0.08 },
        { selector: ".footer-grid > *", delayStep: 0.12 },
        { selector: ".footer-legal a", delayStep: 0.06 }
      ].forEach(({ selector, delay, delayStep }) => {
        const items = document.querySelectorAll(selector);
        items.forEach((item, index) => {
          const offset = delay ?? (delayStep ?? 0) * index;
          if (offset) {
            item.style.setProperty("--reveal-delay", `${offset}s`);
          }
        });
      });

      const observerOptions = {
        rootMargin: "0px 0px -10% 0px",
        threshold: 0.15
      };

      if (!prefersReducedMotion.matches && "IntersectionObserver" in window) {
        const revealObserver = new IntersectionObserver((entries, obs) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-visible");
              obs.unobserve(entry.target);
            }
          });
        }, observerOptions);

        revealElements.forEach((element) => {
          revealObserver.observe(element);
        });
      } else {
        revealElements.forEach((element) => {
          element.classList.add("is-visible");
        });
      }

      const lightbox = document.querySelector("[data-lightbox]");
      const photoCards = Array.from(
        document.querySelectorAll(".photo-grid .photo-card")
      );

      if (lightbox && photoCards.length) {
        const photoGrid = document.querySelector(".photo-grid");
        const lightboxStage = lightbox.querySelector(".lightbox-stage");
        const lightboxImage = lightbox.querySelector("[data-lightbox-image]");
        const lightboxLocation = lightbox.querySelector("[data-lightbox-location]");
        const lightboxDate = lightbox.querySelector("[data-lightbox-date]");
        const closeButton = lightbox.querySelector(".lightbox-close");
        const prevButton = lightbox.querySelector(".lightbox-prev");
        const nextButton = lightbox.querySelector(".lightbox-next");

        const parsePixelValue = (value) => {
          const parsed = parseFloat(value);
          return Number.isNaN(parsed) ? 0 : parsed;
        };

        const updatePhotoRowSpan = (card) => {
          if (!photoGrid) return;
          const ratio = parseFloat(card.dataset.aspect ?? "");
          if (!ratio || !Number.isFinite(ratio)) return;

          const gridStyles = window.getComputedStyle(photoGrid);
          const rowHeight =
            parsePixelValue(gridStyles.getPropertyValue("--photo-grid-row")) ||
            parsePixelValue(gridStyles.getPropertyValue("grid-auto-rows"));
          if (!rowHeight) {
            card.style.removeProperty("--photo-row-span");
            return;
          }

          const rowGap =
            parsePixelValue(gridStyles.getPropertyValue("row-gap")) ||
            parsePixelValue(gridStyles.getPropertyValue("grid-row-gap"));
          const cardWidth = card.getBoundingClientRect().width;
          if (!cardWidth) return;

          const desiredHeight = cardWidth / ratio;
          const totalRow = rowHeight + rowGap;
          const span = Math.max(
            4,
            Math.min(
              28,
              Math.round((desiredHeight + rowGap) / (totalRow || 1))
            )
          );
          card.style.setProperty("--photo-row-span", span);
        };

        const setPhotoMetrics = (card, image) => {
          if (!image?.naturalWidth || !image?.naturalHeight) return;
          const ratio = image.naturalWidth / image.naturalHeight;
          if (!Number.isFinite(ratio) || ratio <= 0) return;

          card.dataset.aspect = ratio.toString();
          card.dataset.orientation = ratio >= 1 ? "landscape" : "portrait";
          card.style.setProperty(
            "--photo-aspect",
            `${image.naturalWidth} / ${image.naturalHeight}`
          );
          updatePhotoRowSpan(card);
        };

        const initializePhotoMetrics = () => {
          photoCards.forEach((card) => {
            const image = card.querySelector("img");
            if (!image) return;

            const applyMetrics = () => setPhotoMetrics(card, image);
            if (image.complete && image.naturalWidth) {
              applyMetrics();
            } else {
              image.addEventListener("load", applyMetrics, { once: true });
            }
          });
        };

        const scheduleSpanRecalculation = (() => {
          let frame = 0;
          return () => {
            if (frame) cancelAnimationFrame(frame);
            frame = requestAnimationFrame(() => {
              photoCards.forEach((card) => updatePhotoRowSpan(card));
              frame = 0;
            });
          };
        })();

        let activePhotoIndex = -1;
        let lastFocusedTrigger = null;
        let hideTimer = null;
        let activeAspectRatio = 1;

        const resizeLightboxStage = (force = false) => {
          if (!lightboxStage || !Number.isFinite(activeAspectRatio) || activeAspectRatio <= 0) {
            return;
          }

          if (!force && !lightbox.classList.contains("is-active")) {
            return;
          }

          const viewportWidth = window.innerWidth;
          const viewportHeight = window.innerHeight;
          const horizontalPadding = Math.max(32, viewportWidth * 0.08);
          const verticalPadding = Math.max(32, viewportHeight * 0.12);

          const maxWidth = Math.min(viewportWidth - horizontalPadding * 2, 1100);
          const maxHeight = Math.min(viewportHeight - verticalPadding * 2, 820);

          let width = maxWidth;
          let height = width / activeAspectRatio;

          if (height > maxHeight) {
            height = maxHeight;
            width = height * activeAspectRatio;
          }

          lightboxStage.style.width = `${Math.round(width)}px`;
          lightboxStage.style.height = `${Math.round(height)}px`;
        };

        const updateLightboxOrientation = (ratio) => {
          if (!Number.isFinite(ratio) || ratio <= 0) return;
          lightbox.dataset.orientation = ratio >= 1 ? "landscape" : "portrait";
        };

        lightboxImage?.addEventListener("load", () => resizeLightboxStage());

        initializePhotoMetrics();
        const handleResize = () => {
          scheduleSpanRecalculation();
          resizeLightboxStage();
        };
        window.addEventListener("resize", handleResize);
        scheduleSpanRecalculation();

        const setLightboxContent = (index) => {
          const card = photoCards[index];
          if (!card || !lightboxImage) {
            return;
          }

          const image = card.querySelector("img");
          const location =
            card.dataset.location ||
            card.querySelector(".photo-caption-location")?.textContent?.trim() ||
            "";
          const date =
            card.dataset.date ||
            card.querySelector(".photo-caption-date")?.textContent?.trim() ||
            "";

          lightboxImage.src = image?.getAttribute("src") ?? "";
          lightboxImage.alt = image?.getAttribute("alt") ?? "";

          if (lightboxLocation) {
            lightboxLocation.textContent = location;
          }

          if (lightboxDate) {
            lightboxDate.textContent = date;
          }

          const ratio =
            parseFloat(card.dataset.aspect ?? "") ||
            (image?.naturalWidth && image?.naturalHeight
              ? image.naturalWidth / image.naturalHeight
              : 1);

          if (Number.isFinite(ratio) && ratio > 0) {
            activeAspectRatio = ratio;
            updateLightboxOrientation(ratio);
            resizeLightboxStage(true);
          } else {
            activeAspectRatio = 1;
            lightbox.removeAttribute("data-orientation");
            if (lightboxStage) {
              lightboxStage.style.removeProperty("width");
              lightboxStage.style.removeProperty("height");
            }
          }

          activePhotoIndex = index;
        };

        const openLightbox = (index) => {
          if (!lightboxImage) return;
          if (hideTimer) {
            window.clearTimeout(hideTimer);
            hideTimer = null;
          }

          setLightboxContent(index);
          lightbox.removeAttribute("hidden");
          lightbox.setAttribute("aria-hidden", "false");
          requestAnimationFrame(() => {
            lightbox.classList.add("is-active");
          });
          document.body.classList.add("lightbox-open");
          lightbox.focus({ preventScroll: true });
        };

        const closeLightbox = ({ returnFocus = true } = {}) => {
          if (!lightbox.classList.contains("is-active")) return;

          lightbox.classList.remove("is-active");
          lightbox.setAttribute("aria-hidden", "true");
          document.body.classList.remove("lightbox-open");
          activePhotoIndex = -1;
          activeAspectRatio = 1;

          hideTimer = window.setTimeout(() => {
            lightbox.setAttribute("hidden", "");
            if (lightboxImage) {
              lightboxImage.removeAttribute("src");
              lightboxImage.removeAttribute("alt");
            }
            if (lightboxStage) {
              lightboxStage.style.removeProperty("width");
              lightboxStage.style.removeProperty("height");
            }
            lightbox.removeAttribute("data-orientation");
          }, 220);

          if (returnFocus && lastFocusedTrigger) {
            lastFocusedTrigger.focus({ preventScroll: true });
          }
          lastFocusedTrigger = null;
        };

        const showNext = () => {
          if (!photoCards.length || activePhotoIndex === -1) return;
          const nextIndex =
            (activePhotoIndex + 1 + photoCards.length) % photoCards.length;
          setLightboxContent(nextIndex);
        };

        const showPrevious = () => {
          if (!photoCards.length || activePhotoIndex === -1) return;
          const prevIndex =
            (activePhotoIndex - 1 + photoCards.length) % photoCards.length;
          setLightboxContent(prevIndex);
        };

        photoCards.forEach((card, index) => {
          card.addEventListener("click", () => {
            lastFocusedTrigger = card;
            openLightbox(index);
          });

          card.addEventListener("keydown", (event) => {
            if (event.key === "Enter" || event.key === " ") {
              event.preventDefault();
              lastFocusedTrigger = card;
              openLightbox(index);
            }
          });
        });

        closeButton?.addEventListener("click", () => closeLightbox());
        prevButton?.addEventListener("click", () => showPrevious());
        nextButton?.addEventListener("click", () => showNext());

        lightbox.addEventListener("click", (event) => {
          if (event.target === lightbox) {
            closeLightbox();
          }
        });

        document.addEventListener("keydown", (event) => {
          if (!lightbox.classList.contains("is-active")) {
            return;
          }

          if (event.key === "Escape") {
            event.preventDefault();
            closeLightbox();
          } else if (event.key === "ArrowRight") {
            event.preventDefault();
            showNext();
          } else if (event.key === "ArrowLeft") {
            event.preventDefault();
            showPrevious();
          }
        });
      }
    </script>
  </body>
</html>
